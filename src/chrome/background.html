<script src="../common/jsHtmlToText.js"></script>
<script src="../common/marked.js"></script>
<script src="../common/github.css.js"></script>
<script src="../common/markdown-render.js"></script>

<script>
  /*
   * Copyright Adam Pritchard 2012
   * MIT License : http://adampritchard.mit-license.org/
   */

  // Create the context menu that will signal our main code.
  chrome.contextMenus.create({
    contexts: ['editable'],
    title: 'Markdown Toggle',
    onclick: function(info, tab) {
      chrome.tabs.sendRequest(tab.id, {action: 'context-click'});
    }
  });


  chrome.extension.onRequest.addListener(
    function renderRequest(html, sender, sendResponse) {
      sendResponse({
        html: markdownRender(htmlToText, marked, html),
        css: markdownHereCss
      });
    });
</script>
